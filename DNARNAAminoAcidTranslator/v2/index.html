<html>
  <head>
    <style>
      #DNA {
        border: 1px solid black;
        width: 300px;
        max-width: 30000000px;
      }
    </style>
    <script src="lookup.js"></script>
  </head>
  <body>
    <h1>DNA RNA Amino Acid Converter</h1>
    <p>Put in the DNA strand and it will convert it into the RNA and Amino Acids it will make.</p>
    <button type="button" onclick="convert()">Convert</button>
    <input type="checkbox" id="mode" name="mode">Ignore Codon start/end sequences<br>
    <div>
      <label for="size">Format: </label>
      <select name="size" id="size">
        <option value='S'>One Letter Abbrivations</option>
        <option value='M' selected>Three Letter Abbrivations</option>
        <option value='L'>Full Amino Acid Names</option>
      </select>
    </div>
    <br>
    <div>DNA: <span id="DNA" contenteditable="true">Example TACAGACGGCAACTCTGGGTGCTTTGTTCTCTTCTCAGTATC</span></div>
    <p id="RNA">RNA:</p>
    <p id="AMA">Amino Acids:</p>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <h3>Changes from v1: </h3>
    <p>Allows multiple formats for outputs.</p>
    <p>Automattically removes extra characters from RNA input allowing spaces or non spaces and extra comment text. Only capital TACG will be used inside of input.</p>
    <script>
    function convert() {
      var DNA = document.getElementById("DNA").innerHTML.replace(/[^TACG]/g, "").replace(/ +/, " ") // input
      console.log(DNA)
      var RNA = "" // outputs
      var AminoAcids = "" // outputs
      var check = !document.getElementById("mode").checked
      var last = false;
      var active = false

      DNA = DNA.match(/.{0,3}/g).join(' ');
      console.log(DNA)

      for (var i = 0; i < DNA.length; i++) { // convert DNA to RNA   transcription   key: T=A A=U G=C C=G
        switch(DNA[i]) {
          case "T":
            RNA = RNA + "A"
            break
          case "A":
            RNA = RNA + "U"
            break
          case "G":
            RNA = RNA + "C"
            break
          case "C":
            RNA = RNA + "G"
            break
          default:
            RNA = RNA + " "
            break
        }
      }

      document.getElementById("RNA").innerHTML = "RNA: " + RNA

      RNASplit = RNA.split(" ")

      for (var i = 0; i < RNASplit.length; i++) {
        for (var j = 0; j < lookupTableRNA.length; j++) {
          if (RNASplit[i] == lookupTableRNA[j][0]) {
            if (lookupTableRNA[j][1] == "met") {
              active = true;
            } else if (lookupTableRNA[j][1] == "stp") {
              active = false
              last = true
            }
            if (!check || (check && active) || last) {
              AminoAcids += lookupTableRNA[j][1] + " "
              last = false
            }
            break;
          }
        }
      }

      size = document.getElementById("size").value

      if (size == "L" || size == "S") {
        index = -1
        if (size == "L") {index = 1;} else {index = 2;}
        AASplit = AminoAcids.split(" ")
        AminoAcids = ""
        for (var i = 0; i < AASplit.length; i++) {
          for (var j = 0; j < lookupTableAA.length; j++) {
            if (AASplit[i] == lookupTableAA[j][0]) {
              AminoAcids += lookupTableAA[j][index] + " "
              break;
            }
          }
        }
      }

      document.getElementById("AMA").innerHTML = "Amino Acids: " + AminoAcids
    }

    </script>
  </body>
</html>
